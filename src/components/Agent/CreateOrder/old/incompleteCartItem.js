var incompletecartResponse = {
    'agentId': 'service',
    'creationTime': 1543830372000,
    'orderComments': [
    ],
    'sourceSystem': 'Cloud Commerce',
    'dynamicProperties': [
    ],
    'stateString': 'INCOMPLETE',
    'paymentGroups': [
    ],
    'priceInfo': {
        'amount': 251.98,
        'total': 251.98,
        'shipping': 0,
        'shippingSurchargeValue': 0,
        'tax': 0,
        'subTotal': 251.98,
        'currencyCode': 'USD',
        'totalWithoutTax': 251.98
    },
    'submissionProgress': [
    ],
    'pricingMessages': {
    },
    'shoppingCart': {
        'items': [
            {
                'rawTotalPrice': 229.99,
                'returnedQuantity': 0,
                'displayName': 'Xbox 360',
                'dynamicProperties': [
                ],
                'priceOverridenBy': '',
                'shippingSurchargeValue': 0,
                'availabilityDate': null,
                'discountAmount': 0,
                'externalData': [
                ],
                'imageInfo': {
                    'primaryThumbImageURL': '/ccstore/v1/images/?source=/file/v4675296977080013589/products/xbox360_LARGE.jpg&height=100&width=100'
                },
                'preOrderQuantity': 0,
                'overriddenPrice': '',
                'commerceItemId': 'ci1000628',
                'price': 229.99,
                'isPriceOverridden': false,
                'variant': [
                ],
                'onSale': false,
                'actionCode': null,
                'locationInventoryInfoMap': [
                ],
                'stateDetailsAsUser': 'Added to order',
                'unitPrice': 229.99,
                'childSKUs': [
                    {
                        'primaryThumbImageURL': null
                    }
                ],
                'quantity': 1,
                'productId': 'prod10012',
                'pointOfNoRevision': false,
                'salePrice': 0,
                'detailedItemPriceInfo': [
                    {
                        'discounted': false,
                        'secondaryCurrencyTaxAmount': 0,
                        'amount': 229.99,
                        'quantity': 1,
                        'tax': 0,
                        'orderDiscountShare': 0,
                        'detailedUnitPrice': 229.99,
                        'currencyCode': 'USD'
                    }
                ],
                'giftWithPurchaseCommerceItemMarkers': [
                ],
                'originalCommerceItemId': null,
                'tax': 0,
                'catRefId': 'sku10025',
                'discountInfo': [
                ],
                'siteId': 'siteUS',
                'stateDescription': 'INITIAL',
                'backOrderQuantity': 0,
                'listPrice': 229.99,
                'status': 0,
                'priceOverrideReason': {
                }
            },
            {
                'rawTotalPrice': 21.99,
                'returnedQuantity': 0,
                'displayName': 'The Girl with the Dragon Tattoo',
                'dynamicProperties': [
                ],
                'priceOverridenBy': '',
                'shippingSurchargeValue': 0,
                'availabilityDate': null,
                'discountAmount': 0,
                'externalData': [
                ],
                'imageInfo': {
                    'primaryThumbImageURL': '/ccstore/v1/images/?source=/file/v3838394227481959246/products/girldragontattoo_LARGE.jpg&height=100&width=100'
                },
                'preOrderQuantity': 0,
                'overriddenPrice': '',
                'commerceItemId': 'ci1000630',
                'price': 21.99,
                'isPriceOverridden': false,
                'variant': [
                ],
                'onSale': false,
                'actionCode': null,
                'locationInventoryInfoMap': [
                ],
                'stateDetailsAsUser': 'Added to order',
                'unitPrice': 21.99,
                'childSKUs': [
                    {
                        'primaryThumbImageURL': null
                    }
                ],
                'quantity': 1,
                'productId': 'Product_36Exy',
                'pointOfNoRevision': false,
                'salePrice': 0,
                'detailedItemPriceInfo': [
                    {
                        'discounted': false,
                        'secondaryCurrencyTaxAmount': 0,
                        'amount': 21.99,
                        'quantity': 1,
                        'tax': 0,
                        'orderDiscountShare': 0,
                        'detailedUnitPrice': 21.99,
                        'currencyCode': 'USD'
                    }
                ],
                'giftWithPurchaseCommerceItemMarkers': [
                ],
                'originalCommerceItemId': null,
                'tax': 0,
                'catRefId': 'Sku_36Fxy',
                'discountInfo': [
                ],
                'siteId': 'siteUS',
                'stateDescription': 'INITIAL',
                'backOrderQuantity': 0,
                'listPrice': 21.99,
                'status': 0,
                'priceOverrideReason': {
                }
            }
        ]
    },
    'links': [
        {
            'rel': 'self',
            'href': 'http://busgk0711.us.oracle.com:9080/ccagentui/v1/orders?profileId=120462&status=incomplete'
        }
    ],
    'id': 'o10501',
    'externalContext': false,
    'state': 0,
    'stateDetailsAsUser': 'Incomplete',
    'taxPriceInfo': {
        'cityTax': 0,
        'secondaryCurrencyTaxAmount': 0,
        'amount': 14.37,
        'valueAddedTax': 0,
        'countyTax': 0,
        'isTaxIncluded': false,
        'miscTax': 0,
        'districtTax': 0,
        'stateTax': 14.37,
        'countryTax': 0
    },
    'shippingGroups': [
        {
            'shippingMethod': {
                'secondaryCurrencyTaxAmount': 0,
                'shippingTax': 0,
                'cost': 0,
                'value': 'hardgoodShippingGroup',
                'shippingMethodDescription': 'hardgoodShippingGroup',
                'displayName': 'hardgoodShippingGroup'
            },
            'shippingGroupId': 'sg30520',
            'type': 'hardgoodShippingGroup',
            'submittedDate': null,
            'priceInfo': {
                'amount': 251.98,
                'total': 251.98,
                'shipping': 0,
                'shippingSurchargeValue': 0,
                'tax': 0,
                'subTotal': 251.98,
                'currencyCode': 'USD',
                'totalWithoutTax': 251.98
            },
            'discountInfo': {
                'orderDiscount': 0,
                'discountDescList': [
                ],
                'shippingDiscount': 0
            },
            'recurringChargePriceInfo': null,
            'shipOnDate': null,
            'trackingInfo': [
            ],
            'actualShipDate': null,
            'shippingAddress': {
                'lastName': null,
                'country': null,
                'address3': null,
                'address2': null,
                'city': null,
                'prefix': null,
                'address1': null,
                'postalCode': null,
                'companyName': null,
                'jobTitle': null,
                'county': null,
                'suffix': null,
                'firstName': null,
                'phoneNumber': null,
                'faxNumber': null,
                'alias': null,
                'middleName': null,
                'state': null,
                'email': null
            },
            'items': [
                {
                    'primaryThumbImageURL': '/ccstore/v1/images/?source=/file/v4675296977080013589/products/xbox360_LARGE.jpg&height=100&width=100',
                    'rawTotalPrice': 229.99,
                    'returnedQuantity': 0,
                    'dynamicProperties': [
                    ],
                    'displayName': 'Xbox 360',
                    'priceOverridenBy': '',
                    'shippingSurchargeValue': 0,
                    'availabilityDate': null,
                    'externalData': [
                    ],
                    'discountAmount': 0,
                    'preOrderQuantity': 0,
                    'overriddenPrice': '',
                    'commerceItemId': 'ci1000628',
                    'price': 229.99,
                    'isPriceOverridden': false,
                    'variant': [
                    ],
                    'onSale': false,
                    'primaryImageAltText': 'Xbox 360',
                    'stateDetailsAsUser': 'The item has been initialized within the shipping group',
                    'commerceId': 'ci1000629',
                    'unitPrice': 229.99,
                    'primaryImageTitle': 'Xbox 360',
                    'amount': 229.99,
                    'quantity': 1,
                    'pointOfNoRevision': false,
                    'productId': 'prod10012',
                    'salePrice': 0,
                    'detailedItemPriceInfo': [
                        {
                            'discounted': false,
                            'secondaryCurrencyTaxAmount': 0,
                            'amount': 229.99,
                            'quantity': 1,
                            'tax': 0,
                            'orderDiscountShare': 0,
                            'detailedUnitPrice': 229.99,
                            'currencyCode': 'USD'
                        }
                    ],
                    'active': true,
                    'catRefId': 'sku10025',
                    'skuProperties': [
                        {
                            'propertyType': 'sku-base',
                            'name': 'derivedOnlineOnly',
                            'id': 'derivedOnlineOnly',
                            'value': false
                        },
                        {
                            'propertyType': 'sku-base',
                            'name': 'Not Returnable',
                            'id': 'nonreturnable',
                            'value': false
                        },
                        {
                            'propertyType': 'sku-base',
                            'name': 'Name',
                            'id': 'displayName',
                            'value': null
                        },
                        {
                            'propertyType': 'sku-base',
                            'name': 'Active',
                            'id': 'active',
                            'value': true
                        },
                        {
                            'propertyType': 'sku-base',
                            'name': 'Id',
                            'id': 'id',
                            'value': 'sku10025'
                        }
                    ],
                    'discountInfo': [
                    ],
                    'route': '/xbox-360/product/prod10012',
                    'shopperInput': {
                    },
                    'backOrderQuantity': 0,
                    'listPrice': 229.99,
                    'status': 'INITIAL',
                    'priceOverrideReason': {
                    }
                },
                {
                    'primaryThumbImageURL': '/ccstore/v1/images/?source=/file/v3838394227481959246/products/girldragontattoo_LARGE.jpg&height=100&width=100',
                    'rawTotalPrice': 21.99,
                    'returnedQuantity': 0,
                    'dynamicProperties': [
                    ],
                    'displayName': 'The Girl with the Dragon Tattoo',
                    'priceOverridenBy': '',
                    'shippingSurchargeValue': 0,
                    'availabilityDate': null,
                    'externalData': [
                    ],
                    'discountAmount': 0,
                    'preOrderQuantity': 0,
                    'overriddenPrice': '',
                    'commerceItemId': 'ci1000630',
                    'price': 21.99,
                    'isPriceOverridden': false,
                    'variant': [
                    ],
                    'onSale': false,
                    'primaryImageAltText': 'The Girl with the Dragon Tattoo',
                    'stateDetailsAsUser': 'The item has been initialized within the shipping group',
                    'commerceId': 'ci1000630',
                    'unitPrice': 21.99,
                    'primaryImageTitle': 'The Girl with the Dragon Tattoo',
                    'amount': 21.99,
                    'quantity': 1,
                    'pointOfNoRevision': false,
                    'productId': 'Product_36Exy',
                    'salePrice': 0,
                    'detailedItemPriceInfo': [
                        {
                            'discounted': false,
                            'secondaryCurrencyTaxAmount': 0,
                            'amount': 21.99,
                            'quantity': 1,
                            'tax': 0,
                            'orderDiscountShare': 0,
                            'detailedUnitPrice': 21.99,
                            'currencyCode': 'USD'
                        }
                    ],
                    'active': true,
                    'catRefId': 'Sku_36Fxy',
                    'skuProperties': [
                        {
                            'propertyType': 'sku-base',
                            'name': 'derivedOnlineOnly',
                            'id': 'derivedOnlineOnly',
                            'value': false
                        },
                        {
                            'propertyType': 'sku-base',
                            'name': 'Not Returnable',
                            'id': 'nonreturnable',
                            'value': false
                        },
                        {
                            'propertyType': 'sku-base',
                            'name': 'Name',
                            'id': 'displayName',
                            'value': null
                        },
                        {
                            'propertyType': 'sku-base',
                            'name': 'Active',
                            'id': 'active',
                            'value': true
                        },
                        {
                            'propertyType': 'sku-base',
                            'name': 'Id',
                            'id': 'id',
                            'value': 'Sku_36Fxy'
                        }
                    ],
                    'discountInfo': [
                    ],
                    'route': '/the-girl-with-the-dragon-tattoo/product/Product_36Exy',
                    'shopperInput': {
                    },
                    'backOrderQuantity': 0,
                    'listPrice': 21.99,
                    'status': 'INITIAL',
                    'priceOverrideReason': {
                    }
                }
            ],
            'trackingNumber': null,
            'status': 'INITIAL'
        }
    ],
    'approvalSystemMessages': [
    ],
    'shippingMethod': {
        'secondaryCurrencyTaxAmount': 0,
        'shippingTax': 0,
        'cost': 0,
        'value': 'hardgoodShippingGroup',
        'shippingMethodDescription': 'hardgoodShippingGroup',
        'displayName': 'hardgoodShippingGroup'
    },
    'profile': {
        'firstName': 'Rahul',
        'lastName': 'Dravid',
        'middleName': null,
        'email': 'rahul@example1543474882244.com'
    },
    'isItemPriceOverrideAllowed': true,
    'priceListGroup': {
        'deleted': false,
        'isTaxIncluded': false,
        'displayName': 'Default Price Group',
        'repositoryId': 'defaultPriceGroup',
        'listPriceList': {
            'repositoryId': 'listPrices'
        },
        'active': true,
        'salePriceList': {
            'repositoryId': 'salePrices'
        },
        'currency': {
            'currencyType': null,
            'symbol': '$',
            'deleted': false,
            'displayName': 'US Dollar',
            'repositoryId': 'en_US',
            'fractionalDigits': 2,
            'currencyCode': 'USD',
            'numericCode': '840'
        },
        'id': 'defaultPriceGroup',
        'locale': 'en_US',
        'shippingSurchargePriceList': {
            'repositoryId': 'shippingSurchargePrices'
        }
    },
    'cartName': 'o10501',
    'returnRequests': [
    ],
    'creationDate': '2018-12-03T09:46:12.000Z',
    'orderAction': 'order',
    'originOfOrder': 'contactCenter',
    'submissionErrorCodes': [
    ],
    'discountInfo': {
        'unclaimedCouponMultiPromotions': {
        },
        'orderCouponsMap': {
        },
        'orderDiscount': 0,
        'shippingDiscount': 0,
        'orderImplicitDiscountList': [
        ],
        'unclaimedCouponsMap': {
        },
        'claimedCouponMultiPromotions': {
        }
    },
    'submissionErrorMessages': [
    ],
    'profileId': '120462',
    'exchangeRequests': [
    ],
    'giftWithPurchaseInfo': [
    ],
    'siteId': 'siteUS',
    'shippingAddress': {
        'lastName': null,
        'country': null,
        'address3': null,
        'address2': null,
        'city': null,
        'prefix': null,
        'address1': null,
        'postalCode': null,
        'companyName': null,
        'jobTitle': null,
        'county': null,
        'suffix': null,
        'firstName': null,
        'phoneNumber': null,
        'faxNumber': null,
        'alias': null,
        'middleName': null,
        'state': null,
        'email': null
    },
    'giftWithPurchaseOrderMarkers': [
    ]
};


var incompletecartItem = {
    lookup: function () {
        return this.resp;
    },
    initalQuantity: null,
    quantity: function () { return this.initalQuantity ? this.initalQuantity : this.lookup().quantity },
    updateQuantity: function (newQuantity) {
        this.initalQuantity = newQuantity;
    },
    skuId: function () {
        return this.lookup().catRefId;
    },
    id: function () {
        return this.lookup().productId;
    },
    displayName: function () {
        return this.lookup().displayName;
    },
    listPrice: function () {
        return this.lookup().listPrice;
    },
    salePrice: function () {
        return this.lookup().salePrice;
    },
    shippingSurcharge: function () {
        return this.lookup().shippingSurchargeValue;
    },
    status: function () {
        return this.lookup().active;
    }
};

var state = {
    items: [],
    profileId: null,
    orderId: null,
    siteId: null,
    plg: null


}

function processIncompleteCart() {
    let itemsInIncompleteCart = extractItems();
    let incompleteOrderId = incompletecartResponse.id;
    let profileId = incompletecartResponse.profileId;
    let siteId = incompletecartResponse.siteId;
    let incompleteOrderPriceListGroup = incompletecartResponse.priceListGroup;

    state.items = itemsInIncompleteCart;
    state.profileId = profileId;
    state.orderId = incompleteOrderId;
    state.siteId = siteId;
    state.plg = incompleteOrderPriceListGroup;


}

function extractItems() {
    var itemsArray = incompletecartResponse.shoppingCart.items.map(function (ele) {
        let item = { ...incompletecartItem };
        item.resp = ele;
        return item;
    }
    );
    return itemsArray
}



console.log(state);
processIncompleteCart();
